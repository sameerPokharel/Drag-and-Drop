<!DOCTYPE html>
<html>
<head>
	<title>Drag and Drop</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	
	
	<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css">
<style type="text/css">
	* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.card {
  height: 320px;
  width: 232px;
  margin-left: -40px;
  margin-top: 20px;
  position: relative;

}

#sort-1 {
  list-style: none;
  margin: 3px;
  margin-bottom: 10px;
}

#sort-1 li {
  margin-top: 10px;
}

.list {
  margin-left: 5px;
}

#right {
  float: right;
  margin-right: 10px;
}

.drag-card {
  background: #ccc;
  color: #000;
  border: 1px solid #222;
  border-radius: 3px;
  padding: 0.2em;
  
}

.drop-card {
  padding: 0;
  display: inline-block;
  width: 98%;
  text-align: center;
}

</style>

</head>
<body>
	<div class="container">
		
		<div id="right">
			<div id="dropdiv">
				<table border="3 " class="table">
					<thead>
						<tr>
							<th>Day/shift</th>
							<th id="shift1">7:15-8:45</th>
							<th id="shift2">8:45-9:30</th>
							<th id="shift3">9:30-10:15</th>
							<th id="shift4">11:00-11:45</th>
							<th id="shift5">11:45-12:30</th>
							<th id="shift6">12:30-13:15</th>
							<th id="shift7">1:15-14:00</th>
						</tr>
					</thead>
					<tbody id="body">
						<tr id="con1" class="sortConn">
							<td id="row">Sunday</td>
							<td class="span drop"><span class="ui-state-default " id="1"></span></td>
							<td class="span drop"><span class="ui-state-default" id="2"></span></td>
							<td class="span drop"><span class="ui-state-default" id="3"></span> </td>
							<td class="span drop"><span class="ui-state-default" id="4"></span></td>
							<td class="span drop"><span class="ui-state-default" id="5"></span></td>
							<td class="span drop"><span class="ui-state-default" id="6"></span></td>
							<td class="span drop"><span class="ui-state-default" id="7"></span></td>
						</tr>
						<tr id="con2" class="sortConn">
							<td id="row">Monday</td>
							<td class="span drop"><span class="ui-state-default " id="8"></span></td>
							<td class="span drop"><span class="ui-state-default" id="9"></span></td>
							<td class="span drop"><span class="ui-state-default" id="10"></span></td>
							<td class="span drop"><span class="ui-state-default" id="11"></span></td>
							<td class="span drop"><span class="ui-state-default" id="12"></span></td>
							<td class="span drop"><span class="ui-state-default" id="13"></span></td>
							<td class="span drop"><span class="ui-state-default" id="14"></span></td>
						</tr>
						<tr id="con3" class="sortConn">
							<td id="row">Tuesday</td>
							<td class="span drop"><span class="ui-state-default" id="15"></span></td>
							<td class="span drop"><span class="ui-state-default" id="16"></span></td>
							<td class="span drop"><span class="ui-state-default" id="17"></span></td>
							<td class="span drop"><span class="ui-state-default" id="18"></span></td>
							<td class="span drop"><span class="ui-state-default" id="19"></span></td>
							<td class="span drop"><span class="ui-state-default" id="20"></span></td>
							<td class="span drop"><span class="ui-state-default" id="21"></span></td>
						</tr>
						<tr id="con4" class="sortConn">
							<td id="row">Wednesday</td>
							<td class="span drop"><span class="ui-state-default" id="22"></span></td>
							<td class="span drop"><span class="ui-state-default" id="23"></span></td>
							<td class="span drop"><span class="ui-state-default" id="24"></span></td>
							<td class="span drop"><span class="ui-state-default" id="25"></span></td>
							<td class="span drop"><span class="ui-state-default" id="26"></span></td>
							<td class="span drop"><span class="ui-state-default" id="27"></span></td>
							<td class="span drop"><span class="ui-state-default" id="28"></span></td>
						</tr>
						<tr id="con5" class="sortConn">
							<td id="row">Thrusday</td>
							<td class="span drop"><span class="ui-state-default" id="29"></span></td>
							<td class="span drop"><span class="ui-state-default" id="30"></span></td>
							<td class="span drop"><span class="ui-state-default" id="31"></span></td>
							<td class="span drop"><span class="ui-state-default" id="32"></span></td>
							<td class="span drop"><span class="ui-state-default" id="33"></span></td>
							<td class="span drop"><span class="ui-state-default" id="34"></span></td>
							<td class="span drop"><span class="ui-state-default" id="35"></span></td>
						</tr>
						<tr id="con6" class="sortConn">
							<td id="row">Friday</td>
							<td class="span drop"><span class="ui-state-default" id="36"></span></td>
							<td class="span drop"><span class="ui-state-default" id="37"></span></td>
							<td class="span drop"><span class="ui-state-default" id="38"></span></td>
							<td class="span drop"><span class="ui-state-default" id="39"></span></td>
							<td class="span drop"><span class="ui-state-default" id="40"></span></td>
							<td class="span drop"><span class="ui-state-default" id="41"></span></td>
							<td class="span drop"><span class="ui-state-default" id="42"></span></td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		
		<div id="drag-list">
			<div id="origin" class="card">
				<ul id="sort-1" class="list">
					<li id="one">English</li>
					<li id="two">Nepali</li>
					<li id="three">Economics</li>
				</ul>
				<button>Trash</button>
			</div>
		</div>
	</div>






	<script
	src="https://code.jquery.com/jquery-3.4.0.min.js"
	integrity="sha256-BJeo0qm959uMBGb65z40ejJYGSgR7REI4+CW1fNKwOg="
	crossorigin="anonymous"></script>

	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.js"></script>
	<script type="text/javascript">
		$(document).ready(function(){
			console.log('ready')
			$(function() {
  function makeDrag(el, clone) {
    if (clone == undefined) {
      clone = false;
    }
    var $d = $(el).draggable({
      cancel: "a.ui-icon",
      revert: "invalid",
      containment: ".container",
      helper: function(e) {
        if (clone) {
          var cnt = $(e.target).text();
          
// console.log(cnt)
          return $("<div>", {
            class: "drag-card"
          }).html(cnt);
        }
       


        return $(e.target);
        // console.log(cnt)
      },
      cursor: "move",
      appendTo: "body",
      refreshPositions: true
    });
    return $d;
  }
  var $listItem = $('#sort-1 li');
  makeDrag($listItem, true);
  $("#sort-1").selectable();
  $("#sort-1").disableSelection();
  var $dropItems = $("#dropdiv .drop");
  initDroppable($dropItems);

  function initDroppable($elements) {
    $elements.droppable({
      classes: {
        "ui-droppable-hover": "ui-state-hover"
      },
      accept: ":not(.ui-sortable-helper)",
     
// out:function(event,ui){
// var $this = $(this);
//  if ($(this).find(ui.draggable.attr('id'))) {
//         	$this.droppable('disable')

        	
//         } 
// $this.droppable('enable')
// },


      drop: function(event, ui) {
        var $this = $(this);
       $this.droppable('enable')

        var $item = $("<div>", {
            class: "drop-card"
          })
          .html(ui.helper.text());
        $("span", $this).append($item);
        makeDrag($item);
        ui.helper.remove();
   
//    if( ui.draggable.data('droppedin',$(this))){
//         $(this).droppable('disable');
// }else{
// 	  $(this).droppable('enable');
// }

console.log($item.text())
   var day= $this.closest('  tr  ').children().eq(0).text();
					console.log("Day:"+day)

					var l=$(this).index();

					var x= $this.closest('table').find('thead th ').siblings().contents().eq(l).text()
					console.log("Shift:"+x)

      }
    })
  }
  var $trash = $('#drag-list button');
  $trash.button({
      icon: "ui-icon-trash"
    })
    .click(function(e) {
      e.preventDefault();
      var retval = confirm("Are you sure you want to empty the trash?");
      if (retval) {
        // Empty Trash
        $trash.removeClass("ui-state-highlight");
      }
    })
    .droppable({
      drop: function(event, ui) {
        var drag_id = $(ui.draggable).attr("id");
        var targetElem = $(this).attr("id");
        deleteMe = true;
        $(this)
          .addClass("ui-state-highlight")
          .find("p")
          .html("Dropped! inside " + targetElem);
        ui.helper.remove();
        ui.draggable.remove();

console.log("Remove:"+$(ui.draggable).text())
 

      }
    });
});

		});
	</script>
</body>
</html>