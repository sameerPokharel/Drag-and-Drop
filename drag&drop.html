
<!DOCTYPE html>
<html>
<head>
	<title>Drag & Drop js</title>
	
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	
	<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css">
	<style type="text/css">
		*{
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}






		.card{
			height: 340px;
			width: 232px;
			margin-left: 20px;
			margin-top: 50px

		}
		#dragList #sort1 li{
			list-style-type: none;
			margin-top: 10px;

		}

		.list{
			margin-left: 5px;

		}


		#right{
			float: right;
			margin-right: 20px;
		}


		.table td{


			margin:2px;


		}
		.has-drop{
			/*position: sticky;*/
			position: static;
		}

	</style>


</head>
<body>

	<div class="containerf" >



		<div id="right">

			<div id="dropdiv">
				<table  border="3 " class="table" >

					<thead >

						<tr style=" max-width:100%" >
							<th>Day/shift</th>

							<th id="shift1">7:15-8:45</th>
							<th id="shift2">8:45-9:30</th>
							<th id="shift3">9:30-10:15</th>
							<th id="shift4">11:00-11:45</th>
							<th id="shift5">11:45-12:30</th>
							<th id="shift6">12:30-13:15</th>
							<th id="shift7">1:15-14:00</th>
						</tr>
					</thead>


					<tbody id="body">


						<tr id="con1" class="sortConn" > 

							<td id="r1">Sunday</td>  

							<td class="span">  <div class="ui-state-default " id="1"></div></td>

							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div> </td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>

						</tr>




						<tr id="con2" class="sortConn">
							<td id="r2">Monday</td>  


							<td class="span"><div class="ui-state-default " id="1"></div></td>

							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>

						</tr>



						<tr  id="con3" class="sortConn">
							<td id="row">Tuesday</td>  
							<td class="span"><div class="ui-state-default " id="1"></div></td>

							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>

						</tr>

						<tr  id="con4" class="sortConn">
							<td id="row">Wednesday</td>  
							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>

						</tr>

						<tr  id="con5" class="sortConn">

							<td id="row">Thrusday</td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>

						</tr>

						<tr  id="con6" class="sortConn">

							<td id="row">Friday</td>  

							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>
							<td class="span"><div class="ui-state-default " id="1"></div></td>

						</tr>
					</tbody>


				</table>
			</div>
		</div>

		<div id="dragList">
			<div id="origin" class="card" >
				<ul id="sort1" class="list" >
					<li id="one" title="one" class="draggable1" draggable="true" style="list-style-type: none;"><button class="btn btn-outline-danger btn-sm">English</button></li>
					<li id="two" title="two" class="draggable2" draggable="true" style="list-style-type: none;"><button class="btn btn-outline-danger btn-sm">Nepali</button></li>
					<li id="three" title="three" class="draggable3" draggable="true" style="list-style-type: none;"><button class="btn btn-outline-danger btn-sm">Economics</button></li>

					<li id="three" title="three" class="draggable3" draggable="true" style="list-style-type: none;"><button class="btn btn-outline-danger btn-sm">Account</button></li>

					<li id="trash" title="four" class="draggable4"><button class="btn btn-lg btn-outline-primary btn-md" droppable="true" >Trash</button></li>
				</ul>
			</div>
		</div>



	</div>








	<!-- s<script src="https://cdnjs.cloudflare.com/ajax/libs/draggable/1.0.0-beta.8/draggable.js"></script> -->
	<script
	src="https://code.jquery.com/jquery-3.4.0.min.js"
	integrity="sha256-BJeo0qm959uMBGb65z40ejJYGSgR7REI4+CW1fNKwOg="
	crossorigin="anonymous"></script>

	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.js"></script>


	<script type="text/javascript">
		$(document).ready(function(){
			console.log('ready');

			var $listItem=$('#sort1 li');



			$(  $listItem ).draggable({
				cancel: "a.ui-icon",
	      revert: "invalid", // when not dropped, the item will revert back to its initial position
	      // containment: "document",
	      helper: "clone",
	      cursor: "move",
	      appendTo: "body",
	      tolerance:"fit",
	      opacity:.7,
	      snapMode: 'inner',
	      snap:'.table tr td ',
	       create: function(){
	       	$(this).data('position',$(this).position())
	       },
	      // stack: false,
	


	  });




			$( "#sort1 li" ).selectable();
			$( "#sort1 li" ).disableSelection();

			var $container=$(" .table tr td  ");

console.log($container)
			


			initDroppable($( $container))
			function initDroppable($elements) {

				$elements.droppable({
					activeClass: "ui-state-default",
					hoverClass: "ui-drop-hover",
					accept: ":not(.ui-sortable-helper)",

				over:function(event,ui) {
  	
    
    },
   




				drop:function (event, ui) {
					var $this = $(this);
					var $item = ui.helper.clone();
		

 var draggable = ui.draggable;
        
        evnt=(event.target.id)
				console.log(evnt)
				// console.log($this)	

// if($(this):contains(day)){
// 	$(this).droppable('disable')
// 	// console.log('filtered')
// }

        if($(this).find($(draggable).attr('id')))    
        {
            //Always logs as disabling
            // console.log("Disabling");
            $(this).droppable('disable');
        }
				
draggable.clone().position({
            of: $this,
            my: 'center',
            at: 'center',
            using: function (css, calc) {
                $(this).animate(css, 200, "linear");
            }
        });

 // var drop_el = $(this).offset();
 //      var drag_el = ui.draggable.offset();
 //      var left_end = (drop_el.left + ($(this).width() / 2)) - (drag_el.left + (ui.draggable.width() / 2));
 //      var top_end = (drop_el.top + ($(this).height() / 2)) - (drag_el.top + (ui.draggable.height() / 2));
 //      // $(this).addClass("highlight").find("p");
 //      ui.helper.animate({
 //        top: '+=' + top_end,
 //        left: '+=' + left_end
 //      });
				
// var width = $this.width();
//           var height = $this.height();
//           var cntrLeft = (width / 2) - (ui.draggable.width() / 2);
//           var cntrTop = (height / 2) - (ui.draggable.height() / 2);

//           ui.helper.position.left = cntrLeft;
//           ui.helper.position.top = cntrTop ;

					$this.addClass('has-drop').append($item)
					$(ui.helper).remove();

	  



					$item.draggable({
						cancel: "a.ui-icon",
						revert: 'invalid',
						cursor: "move",
						appendTo: "body",
						snap:'.table tr td  ',
						snapMode: "inner",
						snapTolerance:30,
						tolerance:"intersect",
						zIndex:1,
					});


					
					console.log("Subject:"+$this.text())

					var day= $this.closest('  tr  ').children().eq(0).text();
					console.log("Day:"+day)

					var l=$(this).index();

					var x= $this.closest('table').find('thead th ').siblings().contents().eq(l).text()
					console.log("Shift:"+x)

// if(l.find('0')){
	
// 	$(this).droppable('disable');
// 	console.log('donot drop')
// } 


				},


			})
			}



			var $trash=$(' #sort1  li button ');
			$( $trash ).droppable({
				cancel: "a.ui-icon",
	      revert: "invalid", // when not dropped, the item will revert back to its initial position
	      containment: "document",
	      helper: "clone",
	      cursor: "move",
	      appendTo: "body",
	      refreshPositions: true,

	      drop: function (event, ui) {
	      	var drag_id = $(ui.helper).attr("id");
	      	var targetElem = $(this).attr("id");
	      	deleteMe = true;            
	      	// $(this)
	      	// .addClass("ui-state-highlight")
	      	// .find("p")
	      	// .html("Dropped! inside " + targetElem);
  $(ui.helper).removeClass();
	                $(ui.helper).clone().remove(); //destroy clone
	                // $(ui.draggable).remove(); //remove from list  
	                console.log("Removed:"+$(ui.helper).text())  
	            },    
	            over:function(event,ui){
	            	console.log($(this));
	            },
	        });




		});

	</script>








</body>
</html>
